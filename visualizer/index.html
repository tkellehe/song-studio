<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Song Studio - Visualizer</title>

  <!-- Basic theme CSS (if you have one) -->
  <link rel="stylesheet" href="../css/styles.css" />
  <!-- Local overrides -->
  <link rel="stylesheet" href="visualizer.css" />

  <script type="module" src="visualizer.js"></script>
</head>
<body>
  <header>
    <img src="../assets/note-gradient-icon.svg" alt="Note Icon" />
    <h1>Song Studio - Visualizer</h1>
  </header>

  <!-- Current file name or status -->
  <div class="file-status" id="file-status">No audio loaded</div>

  <!-- TOP CANVAS: "Spectrogram" with draggable dot + time display -->
  <div class="canvas-container">
    <canvas id="spectrogram-canvas" width="600" height="120"></canvas>
    <!-- Time display in bottom-right corner -->
    <div class="time-display" id="spectrogram-time">0:00 / 0:00</div>
    <!-- Draggable dot overlay -->
    <div class="draggable-dot" id="playback-dot"></div>

    <!-- Hidden file input for audio -->
    <input
      type="file"
      id="audio-file-input"
      accept="audio/*"
      style="display: none;"
    />
    <!-- Small overlay button for uploading -->
    <label for="audio-file-input" class="upload-button" title="Upload an audio file">
      <!-- Simple icon (SVG) or text -->
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M19.35 10.04c.68 0 1.36-.06 
          2.04-.16v8.52c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V5.99
          c0-1.1.9-2 2-2h7.52c-.2.63-.32 1.3-.36 2H4v12h16v-7.96
          c-.21.01-.42.01-.65.01zM12 0l4.29 4.29-1.42 1.42L13 4.83V15h-2V4.83
          L9.12 5.71 7.71 4.29 12 0z"/>
      </svg>
    </label>
  </div>

  <!-- BOTTOM CANVAS: "Sonogram" (real-time waveform) -->
  <div class="canvas-container">
    <canvas id="sonogram-canvas" width="600" height="120"></canvas>
  </div>

  <!-- Centered play/pause button -->
  <div class="playback-controls">
    <button id="play-p
